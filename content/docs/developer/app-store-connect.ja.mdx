---
title: App Store Connect 連携
description: App Store ConnectのWebhookをEchobellと統合して、アプリステータスの即座通知とTestFlightフィードバックアラートを受け取る方法
---

import { Step, Steps } from "fumadocs-ui/components/steps";

# App Store Connect 連携

App Store Connect は、アプリのステータス変更と TestFlight フィードバックに関するリアルタイム通知を直接サーバーに送信する Webhook 機能を提供しています。Echobell と統合することで、iOS アプリで重要なイベントが発生するたびに、モバイルデバイスで即座に通知を受け取ることができます。

<Callout type="info">
  App Store Connect の Webhook は、Account Holder、Admin、または App Manager
  の役割を持つ開発者が利用できます。各 Webhook は 1
  つのアプリにのみ適用でき、アプリごとに最大 10 個の Webhook を作成できます。
</Callout>

## 前提条件

- 少なくとも 1 つのチャンネルが作成された Echobell アカウント
- Account Holder、Admin、または App Manager の役割での App Store Connect へのアクセス
- App Store Connect でアクティブな iOS アプリ
- Echobell の Webhook URL

## 監視できる内容

1. **アプリバージョンのステータス変更** — 提出、承認、拒否、リリース
2. **TestFlight イベント** — ビルド処理、テスターフィードバック、招待状態

## ステップバイステップガイド

<Steps>
<Step>
### Echobell チャンネルの作成

1. Echobell アプリを開く
2. 新しいチャンネルを作成（例：「App Store Connect」）
3. 簡単に識別できる特徴的な色を選択
4. 通知を受け取るべきチームメンバーを追加
</Step>
<Step>

### 通知テンプレートの設定

イベントを効果的にフォーマットするテンプレートを設定：

**タイトルテンプレート：**

```
[{{app.name}}] {{eventType}} - {{status}}
```

**本文テンプレート：**

```
📱 アプリ: {{app.name}}
🔄 イベント: {{eventType}}
📊 ステータス: {{status}}
⏰ 時刻: {{eventDate}}
💬 メッセージ: {{message}}
```

</Step>
<Step>
### Webhook URL の取得

1. チャンネル設定で **トリガー** セクションに移動
2. 提供された Webhook URL をコピー
3. URL を安全に保管
</Step>
<Step>

### App Store Connect Webhook の設定

[Apple の公式ドキュメント](https://developer.apple.com/help/app-store-connect/manage-your-team/manage-webhooks/)に従って：

1. [App Store Connect](https://appstoreconnect.apple.com/) にサインイン
2. **ユーザーとアクセス** → **統合** に移動
3. **追加** の下で **Webhooks** をクリック
4. 追加ボタン（+）をクリック
5. 設定：
   - **名前**：「Echobell 通知」
   - **ペイロード URL**：Echobell の Webhook URL
   - **シークレット**：安全な文字列を作成
   - **アプリ**：監視するアプリを選択
   - **イベントトリガー**：希望するイベントを選択
6. **追加** をクリック
</Step>
<Step>

### 統合のテスト

1. Webhook リストで新しく作成した Webhook をクリック
2. 右上の **テスト** をクリック
3. イベントタイプ「Ping」のテスト通知を受信するはずです
</Step>
</Steps>

## 利用可能なイベントトリガー

**アプリバージョンイベント：**

- **App Store Version State Changed**：レビューステータスが変更された時
- **App Store Version Released**：アプリがリリースされた時

**TestFlight イベント：**

- **TestFlight Beta Feedback**：テスターがフィードバックを送信した時
- **TestFlight Beta Review State Changed**：TestFlight ステータスが変更された時

## ベストプラクティス

1. **チャンネル整理**：異なるアプリ用に別々のチャンネルを作成
2. **チーム管理**：関連するメンバーのみを追加
3. **通知タイプ**：重要な拒否には時間重要を使用

## トラブルシューティング

通知を受信できない場合：

1. Webhook URL が正しくコピーされているか確認
2. チャンネルがアクティブで購読者がいるか確認
3. App Store Connect のテストボタンを使用

## 追加リソース

- [Apple Webhooks ドキュメント](https://developer.apple.com/help/app-store-connect/manage-your-team/manage-webhooks/)
- [Echobell Webhook 連携](/ja/docs/webhook)
- [通知テンプレート](/ja/docs/template)
