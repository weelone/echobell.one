---
title: App Store Connect 集成
description: 将 App Store Connect Webhook 接入 Echobell，快速掌握上架进展、TestFlight 反馈和团队通知
---

import { Step, Steps } from "fumadocs-ui/components/steps";

# App Store Connect 集成

App Store Connect Webhook 负责广播每一次关键的 iOS 发布动态。把这些信号接入 Echobell 后，审核结果、版本上线、TestFlight 反馈都会第一时间推送到手机，无需反复刷新或在邮箱里翻找。

<Callout type="info">
  App Store Connect Webhook 仅提供给 Account Holder、Admin 或 App Manager
  角色使用。每条 Webhook 只能关联一个应用，同一应用最多可创建十条。
</Callout>

## 先决条件

- 已启用 Webhook 触发器的 Echobell 频道
- 具备 Account Holder、Admin 或 App Manager 权限的 App Store Connect 账号
- 至少一个需要监控的 iOS 应用
- Echobell Webhook URL

## 可监控的内容

1. **App Store 版本生命周期** — 提交、审核、拒绝、上架等节点
2. **TestFlight 里程碑** — 构建处理结果、测试员反馈、邀请状态变化

## 分步指南

<Steps>
<Step>
### 创建 Echobell 频道

1. 打开 Echobell
2. 新建频道（例："App Store Connect"）
3. 使用醒目的颜色方便识别
4. 添加需要接收通知的团队成员
</Step>
<Step>

### 配置通知模板

模板越清晰，团队就能越快采取行动。

**标题模板：**

```
[{{app.name}}] {{eventType}} - {{status}}
```

**正文模板：**

```
📱 应用：{{app.name}}
🔄 事件：{{eventType}}
📊 状态：{{status}}
⏰ 时间：{{eventDate}}
💬 消息：{{message}}
```

</Step>
<Step>
### 获取 Webhook URL

1. 打开频道设置 → **触发器**
2. 复制 Webhook URL
3. 妥善保存
</Step>
<Step>

### 配置 App Store Connect Webhook

按照 [Apple 官方指引](https://developer.apple.com/help/app-store-connect/manage-your-team/manage-webhooks/)：

1. 登录 [App Store Connect](https://appstoreconnect.apple.com/)
2. 前往 **用户与访问** → **集成**
3. 在 **附加** 区域点击 **Webhook**
4. 点击加号 (+)
5. 填写：
   - **名称**："Echobell 通知"
   - **载荷 URL**：Echobell Webhook 地址
   - **密钥**：自定义安全字符串
   - **应用**：选择需要监控的应用
   - **事件触发器**：勾选想跟踪的事件
6. 点击 **添加**
</Step>
<Step>

### 测试集成

1. 在 Webhook 列表中点击刚创建的 Webhook
2. 点击右上角的 **测试**
3. 应该收到事件类型为"Ping"的测试通知
</Step>
</Steps>

## 可用事件触发器

**App Store 版本事件：**

- **App Store Version State Changed** — 审核状态的每次流转
- **App Store Version Released** — 版本正式上架

**TestFlight 事件：**

- **TestFlight Beta Feedback** — 测试员提交反馈时
- **TestFlight Beta Review State Changed** — TestFlight 状态变化时

## 最佳实践

1. **频道组织**：为不同应用创建独立频道
2. **团队管理**：只添加相关成员
3. **通知类型**：重要拒绝使用时效性通知

## 故障排除

如果没有收到通知：

1. 确认 Webhook URL 复制正确
2. 检查频道是否处于活动状态且有订阅者
3. 使用 App Store Connect 中的测试按钮

## 相关资源

- [Apple Webhooks 文档](https://developer.apple.com/help/app-store-connect/manage-your-team/manage-webhooks/)
- [Echobell Webhook 集成](/zh/docs/webhook)
- [通知模板](/zh/docs/template)
