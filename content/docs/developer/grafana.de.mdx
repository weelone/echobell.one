---
title: Grafana Integration - Echtzeit-Infrastruktur√ºberwachungswarnungen
sidebarTitle: Grafana
description: Vollst√§ndiger Leitfaden zur Integration von Grafana-Warnungen mit Echobell f√ºr sofortige Infrastruktur√ºberwachungsbenachrichtigungen. Schritt-f√ºr-Schritt-Einrichtung, Warnungsvorlagen, Webhook-Konfiguration und Best Practices f√ºr Grafana-Alarme.
---

import { Step, Steps } from "fumadocs-ui/components/steps";

# Grafana Integration

Grafana ist eine beliebte Open-Source-Analyse- und √úberwachungsl√∂sung, die von Tausenden von Organisationen zur Visualisierung von Metriken, Logs und Traces verwendet wird. Durch die Integration von Grafana mit Echobell k√∂nnen Sie sofortige Benachrichtigungen erhalten, wenn Ihre Metriken Warnungen ausl√∂sen - sei es hohe CPU-Auslastung, Speicherdruck, fehlgeschlagene Dienste oder andere √ºberwachte Zust√§nde.

Dieser umfassende Leitfaden f√ºhrt Sie durch die Einrichtung von Grafana-Warnungen mit Echobell, von der grundlegenden Konfiguration bis hin zu fortgeschrittenen Alarm-Management-Strategien.

## Voraussetzungen

Bevor Sie beginnen, stellen Sie sicher, dass Sie Folgendes haben:

- Ein Echobell-Konto mit mindestens einem erstellten Kanal ([Hier starten](/de/docs))
- Zugriff auf eine Grafana-Instanz (Version 8.0 oder h√∂her empfohlen, Version 9.0+ f√ºr beste Kompatibilit√§t)
- Administratorzugriff zur Konfiguration von Warnungsbenachrichtigungen in Grafana (typischerweise Admin- oder Editor-Rolle erforderlich)
- Grundlegendes Verst√§ndnis von Grafana-Dashboards und Metriken
- Vertrautheit mit Ihrer √úberwachungsinfrastruktur und Warnungsanforderungen

## Einrichtungs√ºbersicht

Der Integrationsprozess umfasst f√ºnf Hauptschritte, die typischerweise 10-15 Minuten dauern:

1. **Echobell-Kanal erstellen** - Einen dedizierten Kanal f√ºr Grafana-Warnungen einrichten
2. **Benachrichtigungsvorlagen konfigurieren** - Gestalten, wie Warnungen auf Ihrem Ger√§t erscheinen
3. **Webhook-URL abrufen** - Den einzigartigen Webhook-Endpunkt f√ºr Ihren Kanal erhalten
4. **Grafana-Kontaktpunkt einrichten** - Grafana konfigurieren, um Warnungen an Echobell zu senden
5. **Warnungsregeln in Grafana erstellen** - Definieren, welche Bedingungen Benachrichtigungen ausl√∂sen

Nach der Konfiguration flie√üen Warnungen automatisch von Grafana zu Ihrem Ger√§t in Echtzeit.

## Schritt-f√ºr-Schritt-Anleitung

<Steps>
<Step>
### Echobell-Kanal erstellen

1. √ñffnen Sie die Echobell-App
2. Erstellen Sie einen neuen Kanal (z.B. "Grafana-Warnungen")
3. W√§hlen Sie eine markante Farbe zur einfachen Identifizierung
</Step>
<Step>

### Benachrichtigungsvorlagen konfigurieren

Richten Sie Vorlagen ein, die Ihre Grafana-Warnungen effektiv formatieren:

**Titelvorlage:**

```
{{alertName}} - {{status}}
```

**Nachrichtenvorlage:**

```
üîî Warnung: {{alertName}}
üìä Metrik: {{metric}}
üìà Wert: {{value}}
‚è∞ Zeit: {{time}}
‚ÑπÔ∏è Nachricht: {{message}}
```

Diese Vorlagen funktionieren mit der Warnungs-Payload-Struktur von Grafana.

</Step>
<Step>
### Webhook-URL abrufen

1. Suchen Sie in Ihren Kanaleinstellungen den Abschnitt **Trigger**
2. Kopieren Sie die bereitgestellte Webhook-URL
3. Bewahren Sie diese URL sicher auf, da sie in der Grafana-Konfiguration verwendet wird
</Step>
<Step>

### Grafana-Kontaktpunkt konfigurieren

1. Gehen Sie in Grafana zu **Alerting** ‚Üí **Contact points**
2. Klicken Sie auf **New contact point**
3. Stellen Sie Folgendes ein:
   - Name: "Echobell"
   - Typ: "Webhook"
   - URL: Ihre Echobell-Webhook-URL
   - HTTP-Methode: POST
   - Inhaltstyp: application/json
4. Konfigurieren Sie die Nachrichtenvorlage:

```json
{
  "alertName": "{{ .alertName }}",
  "status": "{{ .status }}",
  "metric": "{{ .metric }}",
  "value": "{{ .value }}",
  "time": "{{ .time }}",
  "message": "{{ .message }}",
  "externalLink": "{{ .dashboardURL }}"
}
```

</Step>
<Step>
### Warnungsregeln erstellen

1. Navigieren Sie zu **Alerting** ‚Üí **Alert rules**
2. Erstellen Sie eine neue Warnungsregel oder bearbeiten Sie eine bestehende
3. In der Regelkonfiguration:
   - Legen Sie geeignete Bedingungen f√ºr Ihre Metriken fest
   - W√§hlen Sie den "Echobell" Kontaktpunkt
   - Konfigurieren Sie die Warnungsauswertungskriterien
</Step>
</Steps>

## Integration testen

So √ºberpr√ºfen Sie Ihre Einrichtung:

1. Erstellen Sie eine Test-Warnungsregel mit einer Bedingung, die schnell ausgel√∂st wird
2. Warten Sie, bis die Bedingung erf√ºllt ist
3. √úberpr√ºfen Sie Ihre Echobell-App auf die Warnungsbenachrichtigung
4. Stellen Sie sicher, dass alle Warnungsvariablen korrekt angezeigt werden
5. Klicken Sie auf die Benachrichtigung, um auf das verlinkte Grafana-Dashboard zuzugreifen

## Arten von Warnungsbenachrichtigungen

Bei der Anmeldung f√ºr den Grafana-Warnungskanal konfigurieren Sie diese wichtigen Benachrichtigungstypen:

- Verwenden Sie **Zeitkritisch** f√ºr dringende kritische Systemwarnungen und Notfallbenachrichtigungen
- Verwenden Sie **Anruf** f√ºr schwere Ausf√§lle, kritische Schwellenwert√ºberschreitungen oder Notfallwarnungen
- Verwenden Sie **Normal** f√ºr Standard-Informationswarnungen und routinem√§√üige Benachrichtigungen

## Best Practices f√ºr das Warnungsmanagement

### Organisation der Warnungsvorlagen

**Halten Sie Warnungsvorlagen klar und konsistent √ºber alle Kan√§le:**

```
Titel: {{alertName}} - {{status}}
Nachricht:
Server: {{instance}}
Metrik: {{metric}}
Aktuell: {{value}}
Schwellenwert: {{threshold}}
```

- **Verwenden Sie strukturierte Formatierung** - Organisieren Sie Informationen mit klaren Beschriftungen
- **F√ºgen Sie kritische Informationen hinzu** - Metrikname, Wert, Schwellenwert, betroffenes System
- **Verwenden Sie Emoji sparsam** - üö® f√ºr kritisch, ‚ö†Ô∏è f√ºr Warnungen, ‚úÖ f√ºr gel√∂st
- **Halten Sie Titel pr√§gnant** - Streben Sie 5-8 W√∂rter an, die das Problem sofort vermitteln
- **Testen Sie Vorlagen** - Senden Sie Test-Warnungen, um die Formatierung vor dem Einsatz zu √ºberpr√ºfen

### Konfiguration kritischer Warnungen

**Legen Sie geeignete Warnungsschwellen fest, um Benachrichtigungsm√ºdigkeit zu vermeiden:**

- **Vermeiden Sie √úber-Warnungen** - Setzen Sie Schwellenwerte auf umsetzbare Ebenen, nicht auf interessante Ebenen
- **Verwenden Sie Hysterese** - Konfigurieren Sie unterschiedliche Schwellenwerte f√ºr Warnung vs. Erholung
- **Gruppieren Sie verwandte Warnungen** - Kombinieren Sie verwandte Bedingungen in einzelne Warnungsregeln
- **Setzen Sie geeignete Auswertungsintervalle** - Balance zwischen Reaktionsf√§higkeit und Rauschreduzierung
- **Ber√ºcksichtigen Sie Zeitfenster** - Verwenden Sie mehrere Bedingungspr√ºfungen vor der Warnung

**Beispiel Schwellenwertstrategie:**

```
# Schlecht: Warnung bei 50% CPU (zu empfindlich)
cpu_usage > 50

# Besser: Warnung bei 80% f√ºr 5 Minuten
avg_over_time(cpu_usage[5m]) > 80

# Am besten: Progressive Warnungen
# Warnung bei 70% nachhaltig, Kritisch bei 90%
```

### Verwenden Sie aussagekr√§ftige Warnungsnamen

Geben Sie Warnungen beschreibende Namen, die sofort vermitteln:

- **Was** √ºberwacht wird (CPU, Speicher, Festplatte)
- **Wo** es passiert (Produktion, Staging, spezifische Instanz)
- **Warum** es wichtig ist (benutzerorientierter Dienst, kritische Datenbank)

Gute Beispiele:

- "Produktionsdatenbank - Hohe Verbindungspool-Nutzung"
- "API-Gateway - Antwortzeitverschlechterung"
- "Worker-Knoten 3 - Festplattenspeicher kritisch"

Vermeiden:

- "Warnung 1", "Test-Warnung", "Hohe CPU"

### F√ºgen Sie ausreichend Kontext hinzu

Ihre Warnungsnachricht sollte beantworten:

- **Was ist passiert?** Die spezifische Bedingung, die ausgel√∂st wurde
- **Wo?** Welches System, welcher Dienst oder welche Instanz
- **Wie schlimm?** Aktueller Wert vs. Schwellenwert
- **Wann?** Zeitstempel der Warnung
- **Was als n√§chstes?** Link zum relevanten Dashboard oder Runbook

### Konfigurieren Sie Priorit√§tsstufen

Verwenden Sie Echobells [Benachrichtigungstypen](/de/docs/notification) strategisch:

- **Normal**: Info-Warnungen, gel√∂ste Benachrichtigungen, nicht dringende Warnungen
- **Zeitkritisch**: Wichtige Warnungen, die innerhalb von Stunden Aufmerksamkeit erfordern
- **Anruf**: Kritische Produktionsprobleme, die sofortige Reaktion erfordern

Ordnen Sie Grafana-Schweregrade den Benachrichtigungstypen zu:

```
Kritisch + Produktion ‚Üí Anruf
Hoch + Produktion ‚Üí Zeitkritisch
Mittel ‚Üí Zeitkritisch
Niedrig ‚Üí Normal
Info/Gel√∂st ‚Üí Normal
```

### Warnungssicherheit

**Sch√ºtzen Sie Ihre √úberwachungsinfrastruktur:**

- **Halten Sie Webhook-URLs geheim** - Sie bieten unauthentifizierten Zugriff zum Senden von Benachrichtigungen
- **Verwenden Sie Umgebungsvariablen** - Hardcodieren Sie keine URLs in Grafana-Bereitstellungsdateien
- **Rotieren Sie Webhooks regelm√§√üig** - Besonders wenn Teammitglieder ausscheiden
- **√úberwachen Sie Webhook-Zustellung** - Verfolgen Sie fehlgeschlagene Zustellungen und untersuchen Sie Anomalien
- **Pr√ºfen Sie Warnungskonfigurationen** - √úberpr√ºfen Sie regelm√§√üig, wer Zugriff hat, um Warnungen zu √§ndern
- **Validieren Sie Warnungsquellen** - Verwenden Sie Grafanas integrierte Authentifizierung f√ºr Kontaktpunkte

### Lebenszyklus-Management von Warnungen

**Pflegen Sie gesunde Warnungshygiene:**

1. **Regelm√§√üige √úberpr√ºfung** - Pr√ºfen Sie Warnungen viertelj√§hrlich, um veraltete Regeln zu entfernen
2. **Dokumentieren Sie Warnungen** - F√ºgen Sie Beschreibungen hinzu, die erkl√§ren, warum jede Warnung existiert
3. **Verfolgen Sie Warnungshistorie** - √úberwachen Sie, welche Warnungen am h√§ufigsten ausgel√∂st werden
4. **Passen Sie Schwellenwerte an** - Basierend auf historischen Daten und Falsch-Positiv-Raten anpassen
5. **Archivieren Sie alte Warnungen** - Deaktivieren, aber Regeln f√ºr Dienste, die eingestellt werden, beibehalten
6. **Versionskontrolle** - Verwenden Sie Grafana-Bereitstellung, um Warnungs√§nderungen zu verfolgen

### Leistungs√ºberlegungen

- **Vermeiden Sie Warnungsst√ºrme** - Konfigurieren Sie geeignete Gruppierung und Timing
- **Verwenden Sie Benachrichtigungsrichtlinien** - Leiten Sie verschiedene Schweregrade an geeignete Kan√§le
- **Setzen Sie Warte-/Wiederholungsintervalle** - Verhindern Sie doppelte Benachrichtigungen
- **Gruppieren Sie √§hnliche Warnungen** - Reduzieren Sie das Benachrichtigungsvolumen mit Aggregation
- **Ber√ºcksichtigen Sie die Tageszeit** - Verwenden Sie [Bedingungen](/de/docs/conditions) f√ºr Gesch√§ftszeiten-Filterung

## Praxisbeispiele

### Hohe CPU-Warnung

```
Titel: {{instance}} CPU Kritisch
Nachricht: CPU-Auslastung: {{cpu_percent}}%
Dauer: {{duration}}
Zeit: {{time}}
Dashboard: {{dashboard_url}}
```

### Speicherdruck

```
Titel: Speicherwarnung - {{hostname}}
Nachricht: Verf√ºgbar: {{available_mb}}MB ({{percent_free}}%)
Schwellenwert: {{threshold_mb}}MB
Aktion: Speicherintensive Prozesse pr√ºfen
```

### Dienst nicht erreichbar

```
Titel: üö® {{service_name}} nicht erreichbar
Nachricht: Gesundheitspr√ºfung fehlgeschlagen
Letzte erfolgreiche Pr√ºfung: {{last_successful_check}}
Auswirkung: {{affected_users}} Benutzer betroffen
Runbook: {{runbook_url}}
```

## H√§ufige Anwendungsf√§lle

### Infrastruktur√ºberwachung

- CPU-, Speicher-, Festplattennutzungsschwellen
- Netzwerkdurchsatz und Paketverlust
- Dienstverf√ºgbarkeit und Gesundheitspr√ºfungen
- Container- und Pod-Status√ºberwachung

### Anwendungsleistung

- Antwortzeitverschlechterung
- Fehlerrate-Erh√∂hungen
- Datenbank-Verbindungspool-Ersch√∂pfung
- Warteschlangentiefe und Verarbeitungsverz√∂gerung

### Gesch√§ftsmetriken

- Transaktionsvolumen-Anomalien
- Umsatz-pro-Minute-Einbr√ºche
- √Ñnderungen der aktiven Benutzerzahl
- API-Rate-Limit-Ann√§herungen

### Sicherheits√ºberwachung

- Fehlgeschlagene Authentifizierungsversuche
- Ungew√∂hnliche Zugriffsmuster
- Zertifikatsablauf-Warnungen
- Firewall-Regelverletzungen

Erfahren Sie mehr √ºber Integrationsstrategien in unserem [Blog-Beitrag √ºber Grafana-Anrufbenachrichtigungen](/blog/grafana-call-notification).

## Fehlerbehebung

Wenn Sie keine Warnungen erhalten, arbeiten Sie diese Diagnoseschritte durch:

### Webhook l√∂st keine Benachrichtigungen aus

1. **√úberpr√ºfen Sie, ob die Webhook-URL korrekt kopiert wurde**

   - Gehen Sie zu Ihrem Echobell-Kanal ‚Üí Trigger ‚Üí Webhook
   - Kopieren Sie die vollst√§ndige URL einschlie√ülich `https://hook.echobell.one/t/`
   - Stellen Sie sicher, dass beim Einf√ºgen in Grafana keine zus√§tzlichen Leerzeichen oder Zeichen hinzugef√ºgt wurden

2. **Pr√ºfen Sie, ob der Kanal aktiv ist**

   - √ñffnen Sie die Echobell-App
   - Navigieren Sie zu Ihrem Grafana-Warnungskanal
   - √úberpr√ºfen Sie, ob er nicht versehentlich gel√∂scht oder archiviert wurde

3. **Stellen Sie sicher, dass es aktive Abonnenten gibt**

   - Mindestens eine Person muss abonniert sein, um Benachrichtigungen zu erhalten
   - √úberpr√ºfen Sie die Abonnentenliste des Kanals
   - Best√§tigen Sie, dass Ihr pers√∂nliches Abonnement aktiv ist

4. **√úberpr√ºfen Sie die Konfiguration des Grafana-Kontaktpunkts**

   - Gehen Sie in Grafana zu Alerting ‚Üí Contact points
   - √ñffnen Sie Ihren Echobell-Kontaktpunkt
   - Best√§tigen Sie, dass die URL mit dem Webhook Ihres Kanals √ºbereinstimmt
   - √úberpr√ºfen Sie, ob die HTTP-Methode auf POST gesetzt ist
   - Best√§tigen Sie, dass Content-Type application/json ist

5. **√úberpr√ºfen Sie die Grafana-Warnungsregelkonfiguration**

   - Navigieren Sie zu Alerting ‚Üí Alert rules
   - √ñffnen Sie die spezifische Regel, die ausl√∂sen sollte
   - Best√§tigen Sie, dass die Regel mit Ihrem Echobell-Kontaktpunkt verkn√ºpft ist
   - √úberpr√ºfen Sie, ob die Benachrichtigungsrichtlinie zum richtigen Kontaktpunkt f√ºhrt

6. **√úberpr√ºfen Sie Grafanas Warnungshistorie**
   - Gehen Sie zu Alerting ‚Üí Alert rules
   - Klicken Sie auf Ihre Regel ‚Üí Verlauf anzeigen
   - √úberpr√ºfen Sie, ob die Warnung tats√§chlich ausgel√∂st wird (nicht im ausstehenden Status)
   - Pr√ºfen Sie, ob es Auswertungsfehler gibt

### Warnungen werden ausgel√∂st, aber nicht zugestellt

1. **Testen Sie den Webhook direkt**

   ```bash
   curl -X POST https://hook.echobell.one/t/YOUR_TOKEN \
     -H "Content-Type: application/json" \
     -d '{"alertName": "Test", "status": "firing"}'
   ```

   Wenn Sie davon eine Benachrichtigung erhalten, aber nicht von Grafana, liegt das Problem in der Grafana-Konfiguration.

2. **√úberpr√ºfen Sie Grafanas Benachrichtigungsrichtlinien**

   - Gehen Sie zu Alerting ‚Üí Notification policies
   - √úberpr√ºfen Sie, ob die Labels Ihrer Regel mit den Richtlinien-Routing-Regeln √ºbereinstimmen
   - Pr√ºfen Sie auf Timing-Probleme (Gruppierungs-Wartezeit, Wiederholungsintervalle)

3. **√úberpr√ºfen Sie Grafana-Logs**
   - Suchen Sie nach Webhook-Zustellungsfehlern in Grafanas Logs
   - Pr√ºfen Sie HTTP-Statuscodes (sollte 200 sein)
   - Untersuchen Sie Timeout- oder Verbindungsfehler

### Benachrichtigungen werden falsch dargestellt

1. **Vorlagenvariablen stimmen nicht mit Grafanas Payload √ºberein**

   - Grafana sendet spezifische Feldnamen wie `.alertName`, `.status` usw.
   - Stellen Sie sicher, dass Ihre Vorlagenvariablen der Payload-Struktur entsprechen
   - Testen Sie mit Grafanas "Test"-Schaltfl√§che, um die tats√§chliche Payload zu sehen

2. **Fehlende Informationen in Benachrichtigungen**

   - Einige Grafana-Variablen k√∂nnen je nach Warnungskonfiguration leer sein
   - F√ºgen Sie Fallback-Werte in Vorlagen hinzu: `{{alertName || "Unbekannte Warnung"}}`
   - √úberpr√ºfen Sie die Grafana-Dokumentation f√ºr verf√ºgbare Vorlagenvariablen

3. **JSON-Parsing-Fehler**
   - √úberpr√ºfen Sie, ob Grafanas Nachrichtenvorlage g√ºltiges JSON ist
   - Pr√ºfen Sie auf nicht-escapte Anf√ºhrungszeichen oder Sonderzeichen
   - Verwenden Sie Online-JSON-Validierer, um die Payload-Struktur zu √ºberpr√ºfen

### Timing-Probleme bei Warnungen

1. **Verz√∂gerungen beim Empfang von Warnungen**

   - √úberpr√ºfen Sie Ihre Netzwerkverbindung
   - Stellen Sie sicher, dass Grafana Echobells Server erreichen kann
   - √úberpr√ºfen Sie Grafanas Auswertungsintervall (kann Verz√∂gerungen verursachen)
   - Pr√ºfen Sie die Timing-Einstellungen der Benachrichtigungsrichtlinie

2. **Doppelte Benachrichtigungen**

   - √úberpr√ºfen Sie die Wiederholungsintervall-Einstellungen in den Benachrichtigungsrichtlinien
   - Pr√ºfen Sie, ob mehrere Regeln f√ºr dieselbe Bedingung ausgel√∂st werden
   - Best√§tigen Sie, dass nur ein Kontaktpunkt f√ºr den Kanal konfiguriert ist

3. **Benachrichtigungen w√§hrend Ruhezeiten**
   - iOS-Fokusmodi k√∂nnen die Benachrichtigungszustellung beeinflussen
   - Zeitkritische und Anruf-Benachrichtigungen k√∂nnen einige Fokusmodi umgehen
   - √úberpr√ºfen Sie die Benachrichtigungseinstellungen Ihres Ger√§ts

## Datenschutz und Datenverarbeitung

Der Datenschutz-First-Ansatz von Echobell bedeutet:

- Warnungsinhalte werden lokal auf Ihrem Ger√§t gespeichert
- Nur wesentliche Konfigurationsdaten werden auf Servern gespeichert
- Webhook-URLs sollten als Geheimnisse behandelt werden
- Keine Warnungsdaten werden auf Echobell-Servern gespeichert

## Zus√§tzliche Ressourcen

- [Grafana Alerting Dokumentation](https://grafana.com/docs/grafana/latest/alerting/)
- [Echobell Webhook Integration](/de/docs/webhook)
- [Benachrichtigungsvorlagen-Leitfaden](/de/docs/notification)
- [Support-Center](/de/docs/support)
