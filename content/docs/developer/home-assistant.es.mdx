---
title: Integración con Home Assistant
description: Guía completa para integrar Echobell con Home Assistant para notificaciones y alertas instantáneas de hogar inteligente
---

import { Step, Steps } from "fumadocs-ui/components/steps";

# Integración con Home Assistant

[Home Assistant](https://www.home-assistant.io/) es una potente plataforma de automatización del hogar de código abierto que prioriza el control local y la privacidad. Al integrar Echobell con Home Assistant, puedes recibir notificaciones instantáneas e incluso llamadas telefónicas cuando ocurren eventos importantes en tu hogar inteligente, ya sea una alerta de seguridad, una brecha en el umbral de temperatura o un disparador de automatización.

Esta guía te explicará cómo configurar Echobell para recibir notificaciones de tus automatizaciones de Home Assistant utilizando webhooks o el servicio de notificación RESTful.

## Requisitos Previos

Antes de comenzar, asegúrate de tener:

- La [aplicación Echobell](https://apps.apple.com/app/id6743597198) instalada en tu dispositivo iOS
- Un canal de Echobell activo (crea uno en la aplicación si aún no lo has hecho)
- Una instancia de Home Assistant en funcionamiento (se recomienda la versión 2023.1 o posterior)
- Acceso a tu configuración de Home Assistant

## Método 1: Usando Disparadores Webhook (Recomendado)

El método webhook es el enfoque más flexible, permitiéndote enviar datos personalizados y utilizar [variables de plantilla](/docs/template) en tus notificaciones.

<Steps>
<Step>
### Obtén tu URL de Webhook de Echobell

1. Abre la aplicación Echobell y navega a tu canal
2. Toca en el canal para ver los detalles
3. Encuentra la **URL del Webhook** en la sección de Disparadores (Triggers)
4. Copia la URL; se verá así: `https://hook.echobell.one/t/TU_TOKEN`
</Step>
<Step>

### Crea una Automatización en Home Assistant

En Home Assistant, puedes activar notificaciones de Echobell utilizando el servicio `rest_command`. Primero, añade el comando REST a tu `configuration.yaml`:

```yaml
rest_command:
  echobell_notify:
    url: "https://hook.echobell.one/t/YOUR_TOKEN"
    method: POST
    content_type: "application/json"
    payload: '{"title": "{{ title }}", "message": "{{ message }}"}'
```

Reemplaza `YOUR_TOKEN` con tu token real de webhook de Echobell.

Después de añadir esto, reinicia Home Assistant para cargar la nueva configuración.

</Step>
<Step>
### Uso en Automatizaciones

Ahora puedes llamar a este servicio desde cualquier automatización. Aquí tienes un ejemplo que te notifica cuando se abre una puerta:

```yaml
automation:
  - alias: "Door Open Alert"
    trigger:
      - platform: state
        entity_id: binary_sensor.front_door
        to: "on"
    action:
      - service: rest_command.echobell_notify
        data:
          title: "Security Alert"
          message: "Front door opened at {{ now().strftime('%H:%M') }}"
```

</Step>
<Step>
### Configura las Plantillas de Notificación

En la configuración de tu canal de Echobell, configura las plantillas de notificación para mostrar los datos del webhook:

- **Plantilla de título**: `{{title}}`
- **Plantilla de cuerpo**: `{{message}}`

Ahora, cuando la automatización se active, recibirás una notificación con el título y mensaje personalizados.

</Step>
</Steps>

## Método 2: Usando la Plataforma de Notificación RESTful

Para un enfoque más integrado, puedes configurar Echobell como un servicio de notificación en Home Assistant.

### Configuración

Añade lo siguiente a tu `configuration.yaml`:

```yaml
notify:
  - name: echobell
    platform: rest
    resource: https://hook.echobell.one/t/YOUR_TOKEN
    method: POST_JSON
    data:
      title: "{{ title }}"
      message: "{{ message }}"
```

Reemplaza `YOUR_TOKEN` con tu token de webhook de Echobell, luego reinicia Home Assistant.

### Usando el Servicio de Notificación

Ahora puedes usar Echobell como cualquier otro servicio de notificación:

```yaml
automation:
  - alias: "Low Battery Alert"
    trigger:
      - platform: numeric_state
        entity_id: sensor.phone_battery
        below: 20
    action:
      - service: notify.echobell
        data:
          title: "Low Battery Warning"
          message: "Phone battery is at {{ states('sensor.phone_battery') }}%"
```

## Próximos Pasos

Ahora que tienes Echobell integrado con Home Assistant:

- Explora los [tipos de notificación](/docs/notification) para diferentes prioridades de alerta
- Aprende sobre [condiciones](/docs/conditions) para filtrar notificaciones inteligentemente
- Consulta las [variables de plantilla](/docs/template) para formateo avanzado de mensajes
- Lee sobre [mejores prácticas de webhook](/docs/webhook) para una integración óptima

## Recursos Relacionados

- [Documentación de REST Command de Home Assistant](https://www.home-assistant.io/integrations/rest_command/)
- [Plataforma RESTful Notify de Home Assistant](https://www.home-assistant.io/integrations/notify.rest/)
- [Documentación de Webhook de Echobell](/docs/webhook)
- [Sistema de Plantillas de Echobell](/docs/template)
