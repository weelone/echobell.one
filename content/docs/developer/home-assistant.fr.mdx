---
title: Intégration Home Assistant
description: Guide complet pour intégrer Echobell avec Home Assistant pour des notifications et alertes instantanées de maison intelligente
---

import { Step, Steps } from "fumadocs-ui/components/steps";

# Intégration Home Assistant

[Home Assistant](https://www.home-assistant.io/) est une puissante plateforme domotique open-source qui privilégie le contrôle local et la confidentialité. En intégrant Echobell avec Home Assistant, vous pouvez recevoir des notifications instantanées et même des appels téléphoniques lorsque des événements importants se produisent dans votre maison intelligente, qu'il s'agisse d'une alerte de sécurité, d'un dépassement de seuil de température ou d'un déclencheur d'automatisation.

Ce guide vous expliquera comment configurer Echobell pour recevoir des notifications de vos automatisations Home Assistant en utilisant des webhooks ou le service de notification RESTful.

## Prérequis

Avant de commencer, assurez-vous d'avoir :

- L'[application Echobell](https://apps.apple.com/app/id6743597198) installée sur votre appareil iOS
- Un canal Echobell actif (créez-en un dans l'application si ce n'est pas déjà fait)
- Une instance Home Assistant en cours d'exécution (version 2023.1 ou ultérieure recommandée)
- Accès à votre configuration Home Assistant

## Méthode 1 : Utilisation des déclencheurs Webhook (Recommandé)

La méthode webhook est l'approche la plus flexible, vous permettant d'envoyer des données personnalisées et d'utiliser des [variables de modèle](/docs/template) dans vos notifications.

<Steps>
<Step>
### Obtenir votre URL de Webhook Echobell

1. Ouvrez l'application Echobell et accédez à votre canal
2. Appuyez sur le canal pour voir les détails
3. Trouvez l'**URL du Webhook** dans la section Déclencheurs (Triggers)
4. Copiez l'URL — elle ressemblera à : `https://hook.echobell.one/t/VOTRE_TOKEN`
</Step>
<Step>

### Créer une automatisation Home Assistant

Dans Home Assistant, vous pouvez déclencher des notifications Echobell en utilisant le service `rest_command`. Tout d'abord, ajoutez la commande REST à votre `configuration.yaml` :

```yaml
rest_command:
  echobell_notify:
    url: "https://hook.echobell.one/t/YOUR_TOKEN"
    method: POST
    content_type: "application/json"
    payload: '{"title": "{{ title }}", "message": "{{ message }}"}'
```

Remplacez `YOUR_TOKEN` par votre véritable jeton de webhook Echobell.

Après avoir ajouté ceci, redémarrez Home Assistant pour charger la nouvelle configuration.

</Step>
<Step>
### Utilisation dans les automatisations

Maintenant, vous pouvez appeler ce service depuis n'importe quelle automatisation. Voici un exemple qui vous notifie lorsqu'une porte s'ouvre :

```yaml
automation:
  - alias: "Door Open Alert"
    trigger:
      - platform: state
        entity_id: binary_sensor.front_door
        to: "on"
    action:
      - service: rest_command.echobell_notify
        data:
          title: "Security Alert"
          message: "Front door opened at {{ now().strftime('%H:%M') }}"
```

</Step>
<Step>
### Configurer les modèles de notification

Dans les paramètres de votre canal Echobell, configurez les modèles de notification pour afficher les données du webhook :

- **Modèle de titre** : `{{title}}`
- **Modèle de corps** : `{{message}}`

Désormais, lorsque l'automatisation se déclenche, vous recevrez une notification avec le titre et le message personnalisés.

</Step>
</Steps>

## Méthode 2 : Utilisation de la plateforme de notification RESTful

Pour une approche plus intégrée, vous pouvez configurer Echobell comme un service de notification dans Home Assistant.

### Configuration

Ajoutez ce qui suit à votre `configuration.yaml` :

```yaml
notify:
  - name: echobell
    platform: rest
    resource: https://hook.echobell.one/t/YOUR_TOKEN
    method: POST_JSON
    data:
      title: "{{ title }}"
      message: "{{ message }}"
```

Remplacez `YOUR_TOKEN` par votre jeton de webhook Echobell, puis redémarrez Home Assistant.

### Utilisation du service de notification

Vous pouvez maintenant utiliser Echobell comme n'importe quel autre service de notification :

```yaml
automation:
  - alias: "Low Battery Alert"
    trigger:
      - platform: numeric_state
        entity_id: sensor.phone_battery
        below: 20
    action:
      - service: notify.echobell
        data:
          title: "Low Battery Warning"
          message: "Phone battery is at {{ states('sensor.phone_battery') }}%"
```

## Prochaines Étapes

Maintenant que vous avez intégré Echobell avec Home Assistant :

- Explorez les [types de notification](/docs/notification) pour différentes priorités d'alerte
- Apprenez les [conditions](/docs/conditions) pour filtrer intelligemment les notifications
- Consultez les [variables de modèle](/docs/template) pour un formatage avancé des messages
- Lisez les [meilleures pratiques webhook](/docs/webhook) pour une intégration optimale

## Ressources Connexes

- [Documentation REST Command de Home Assistant](https://www.home-assistant.io/integrations/rest_command/)
- [Plateforme RESTful Notify de Home Assistant](https://www.home-assistant.io/integrations/notify.rest/)
- [Documentation Webhook Echobell](/docs/webhook)
- [Système de Modèles Echobell](/docs/template)
