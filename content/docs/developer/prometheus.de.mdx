---
title: Prometheus Integration
description: Richten Sie Prometheus Alertmanager ein, um Alarme per Webhook oder E-Mail an Echobell zu senden
---

import { Step, Steps } from "fumadocs-ui/components/steps";

# Prometheus-Integration

Prometheus mit Alertmanager ist ein weit verbreiteter Open-Source-Monitoring- und Alerting-Stack. Durch die Integration des Alertmanagers mit Echobell erhalten Sie sofortige mobile Benachrichtigungen (inklusive zeitkritischer oder Anruf-Benachrichtigungen), sobald Ihre Alarmregeln ausl√∂sen.

## Voraussetzungen

- Ein Echobell-Konto mit mindestens einem angelegten Kanal
- Eine laufende Prometheus- + Alertmanager-Installation
- Zugriff auf die Bearbeitung der Alertmanager-Konfiguration (alertmanager.yml)

## √úberblick

1. Echobell-Kanal erstellen
2. Benachrichtigungsvorlagen konfigurieren
3. Integrationsmethode w√§hlen (Webhook oder E-Mail)
4. Alarmregeln anlegen oder aktualisieren
5. Testen und verfeinern

## Schritt-f√ºr-Schritt

<Steps>
<Step>
### Echobell-Kanal erstellen

1. Echobell-App √∂ffnen
2. Neuen Kanal erstellen (z. B. ‚ÄûPrometheus Alerts")
3. Eine Farbe zur besseren Erkennung w√§hlen
</Step>
<Step>

### Vorlagen konfigurieren

Die Webhook-Nutzlast des Alertmanagers enth√§lt strukturierte Felder wie status, commonLabels, commonAnnotations, externalURL sowie ein alerts-Array.

**Titelvorlage:**

```
{{commonLabels.alertname}} - {{status}}
```

**Textvorlage:**

```
üîî Alarm: {{commonLabels.alertname}}
üìä Schweregrad: {{commonLabels.severity}}
üñ•Ô∏è Instance: {{alerts[0].labels["instance"]}}
‚è∞ Start: {{alerts[0].startsAt}}
‚ÑπÔ∏è Zusammenfassung: {{commonAnnotations.summary}}
```

**Optionale Link-Vorlage (Erweitert):**

```
{{alerts[0].generatorURL || externalURL}}
```

</Step>
<Step>
### Methode A ‚Äî Webhook (empfohlen)

1. Im Echobell-Kanal die Webhook-URL aus ‚ÄûTriggers" kopieren
2. Im Alertmanager einen Webhook-Receiver konfigurieren:

```yaml
route:
  receiver: echobell-webhook

receivers:
  - name: echobell-webhook
    webhook_configs:
      - url: "https://hook.echobell.one/t/REPLACE_WITH_YOUR_TOKEN"
        send_resolved: true
        http_config:
          follow_redirects: true
```

Hinweis: `send_resolved: true` benachrichtigt auch, wenn Alarme wieder ‚Äûresolved" sind.

</Step>
<Step>
### Methode B ‚Äî E-Mail (Alternative)

Falls E-Mail bevorzugt wird, nutzen Sie den E-Mail-Receiver des Alertmanagers:

1. In Echobell die Kanal-E-Mail aus ‚ÄûTriggers" kopieren
2. Im Alertmanager einen E-Mail-Receiver konfigurieren:

```yaml
receivers:
  - name: echobell-email
    email_configs:
      - to: "PASTE_CHANNEL_EMAIL_ADDRESS"
        send_resolved: true
        subject: "{{ .CommonLabels.alertname }} - {{ .Status }}"
        html: |
          <p><strong>Summary:</strong> {{ .CommonAnnotations.summary }}</p>
          <p>{{ .CommonAnnotations.description }}</p>
```

</Step>
<Step>
### Beispiel-Alarmregel erstellen

```yaml
groups:
  - name: example
    rules:
      - alert: HighCPU
        expr: avg(rate(process_cpu_seconds_total[5m])) > 0.8
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "Hohe CPU-Auslastung"
          description: "CPU war 2 Minuten lang √ºber 80%"
```

Sobald dieser Alarm ausl√∂st, sendet Alertmanager das Event an Echobell.

</Step>
</Steps>

## Benachrichtigungstypen

- **Zeitkritisch**: Kritische Produktionsausf√§lle, Paging-Level Incidents
- **Anruf**: Schwere Ausf√§lle, bei denen Fokus-Modi unterbrochen werden m√ºssen
- **Normal**: Routine-Alarme, Warnungen oder informative Meldungen

## Best Practices

1. Vorlagen kurz aber informativ halten
2. Link-Vorlage nutzen f√ºr direkten Zugang zum Graph/Dashboard
3. Alarme im Alertmanager gruppieren und routen
4. Webhook-URL wie ein Geheimnis behandeln

## Fehlerbehebung

Falls Alarme nicht in Echobell erscheinen:

- Webhook-URL oder Kanal-E-Mail pr√ºfen
- Sicherstellen, dass der Kanal aktiv ist und Abonnenten hat
- Alertmanager-Logs auf Zustellungsfehler pr√ºfen
- Route in alertmanager.yml verifizieren

## Zus√§tzliche Ressourcen

- [Prometheus Dokumentation](https://prometheus.io/docs/introduction/overview/)
- [Alertmanager Konfiguration](https://prometheus.io/docs/alerting/latest/configuration/)
- [Echobell Webhook](/de/docs/webhook)
- [Benachrichtigungsvorlagen](/de/docs/notification)
