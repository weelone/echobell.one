---
title: Integraci√≥n Prometheus Alertmanager - Notificaciones de Monitoreo de Servidores e Infraestructura
sidebarTitle: Prometheus
description: Gu√≠a completa para integrar Prometheus Alertmanager con Echobell para alertas m√≥viles instant√°neas. Recibe notificaciones push para monitoreo de servidores, alertas de infraestructura, avisos de uso de CPU/memoria y eventos cr√≠ticos del sistema v√≠a webhook o email.
---

import { Step, Steps } from "fumadocs-ui/components/steps";

# Integraci√≥n con Prometheus

Prometheus con Alertmanager es un stack de monitoreo y alertas de c√≥digo abierto ampliamente utilizado. Al integrar Alertmanager con Echobell, puedes recibir notificaciones m√≥viles instant√°neas (incluyendo alertas sensibles al tiempo o tipo llamada) cada vez que se activen tus reglas de alerta.

## Requisitos Previos

- Una cuenta de Echobell con al menos un canal creado
- Una instalaci√≥n de Prometheus + Alertmanager en funcionamiento
- Acceso para editar tu configuraci√≥n de Alertmanager (alertmanager.yml)

## Descripci√≥n General

1. Crear un canal de Echobell
2. Configurar plantillas de notificaci√≥n
3. Elegir m√©todo de integraci√≥n (Webhook o Email)
4. Crear o actualizar reglas de alerta
5. Probar y refinar

## Gu√≠a Paso a Paso

<Steps>
<Step>
### Crear un Canal de Echobell

1. Abrir la aplicaci√≥n Echobell
2. Crear un nuevo canal (ej. "Alertas Prometheus")
3. Elegir un color para f√°cil identificaci√≥n
</Step>
<Step>

### Configurar Plantillas de Notificaci√≥n

El payload del webhook de Alertmanager contiene campos estructurados como status, commonLabels, commonAnnotations, externalURL y un array alerts.

**Plantilla de T√≠tulo:**

```
{{commonLabels.alertname}} - {{status}}
```

**Plantilla de Cuerpo:**

```
üîî Alerta: {{commonLabels.alertname}}
üìä Severidad: {{commonLabels.severity}}
üñ•Ô∏è Instancia: {{alerts[0].labels["instance"]}}
‚è∞ Inicio: {{alerts[0].startsAt}}
‚ÑπÔ∏è Resumen: {{commonAnnotations.summary}}
```

**Plantilla de Enlace Opcional (Configuraci√≥n Avanzada):**

```
{{alerts[0].generatorURL || externalURL}}
```

</Step>
<Step>
### M√©todo A ‚Äî Webhook (Recomendado)

1. En tu canal de Echobell, copia la URL del Webhook desde Triggers
2. En Alertmanager, configura un receptor webhook:

```yaml
route:
  receiver: echobell-webhook

receivers:
  - name: echobell-webhook
    webhook_configs:
      - url: "https://hook.echobell.one/t/REPLACE_WITH_YOUR_TOKEN"
        send_resolved: true
        http_config:
          follow_redirects: true
```

Nota: `send_resolved: true` tambi√©n notificar√° cuando las alertas se resuelvan.

</Step>
<Step>
### M√©todo B ‚Äî Email (Alternativo)

Si prefieres email, usa el receptor de email de Alertmanager:

1. En Echobell, copia la direcci√≥n de email del canal desde Triggers
2. Configura un receptor de email en Alertmanager:

```yaml
receivers:
  - name: echobell-email
    email_configs:
      - to: "PASTE_CHANNEL_EMAIL_ADDRESS"
        send_resolved: true
        subject: "{{ .CommonLabels.alertname }} - {{ .Status }}"
        html: |
          <p><strong>Resumen:</strong> {{ .CommonAnnotations.summary }}</p>
          <p>{{ .CommonAnnotations.description }}</p>
```

</Step>
<Step>
### Crear una Regla de Alerta de Ejemplo

```yaml
groups:
  - name: example
    rules:
      - alert: HighCPU
        expr: avg(rate(process_cpu_seconds_total[5m])) > 0.8
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "Alto uso de CPU"
          description: "CPU ha estado sobre 80% por 2 minutos"
```

Una vez que esta alerta se active, Alertmanager enviar√° el evento a Echobell.

</Step>
</Steps>

## Tipos de Notificaci√≥n

- **Sensible al tiempo**: Interrupciones cr√≠ticas de producci√≥n, incidentes de paginaci√≥n
- **Llamada**: Cortes severos donde debes interrumpir modos de enfoque
- **Normal**: Alertas rutinarias, advertencias o avisos informativos

## Mejores Pr√°cticas

1. Mantener las plantillas concisas pero informativas
2. Usar la plantilla de enlace para ir directamente al gr√°fico/dashboard
3. Agrupar y enrutar alertas en Alertmanager
4. Proteger la URL del webhook como un secreto

## Soluci√≥n de Problemas

Si las alertas no aparecen en Echobell:

- Verificar la URL del webhook o email del canal
- Asegurar que el canal est√° activo y tiene suscriptores
- Revisar logs de Alertmanager para errores de entrega
- Verificar la ruta en alertmanager.yml

## Recursos Adicionales

- [Documentaci√≥n de Prometheus](https://prometheus.io/docs/introduction/overview/)
- [Configuraci√≥n de Alertmanager](https://prometheus.io/docs/alerting/latest/configuration/)
- [Webhook de Echobell](/es/docs/webhook)
- [Plantillas de Notificaci√≥n](/es/docs/notification)
